import{_ as o,X as c,Y as i,a1 as a,a2 as l,a3 as u,Z as n,$ as s,a4 as k,C as t}from"./framework-0a3b6e76.js";const r={},d=n("h3",{id:"_1-google-åœ°å›¾ç“¦ç‰‡ä¸‹è½½",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_1-google-åœ°å›¾ç“¦ç‰‡ä¸‹è½½","aria-hidden":"true"},"#"),s(),n("strong",null,"1.Google åœ°å›¾ç“¦ç‰‡ä¸‹è½½")],-1),v=n("p",null,[s("æŸ¥æ‰¾äº†åŠå¤©åœ°å›¾ä¸‹è½½å·¥å…·ï¼Œå„ç§èŠ±é‡Œèƒ¡å“¨è¿˜æœ‰æ”¶è´¹çš„ã€‚å“¥ä»¬ä¸€æƒ³ï¼Œè¿™ç“¦ç‰‡ä¸‹è½½ä¸å°±æ˜¯é€šè¿‡æ¥å£ä¸€ç‚¹ç‚¹è°ƒç”¨äººå®¶åœ°å›¾å®˜æ–¹çš„æ¥å£ä¸‹è½½å—ï¼Ÿæˆ‘å†™ä¸€ä¸ªä¸å°±å®Œäº†å—ã€‚ äºæ˜¯ä¹ï¼Œæˆ‘å…´è‡´å‹ƒå‹ƒçš„æ‰“å¼€äº† IDEAã€‚è½¬å¿µä¸€æƒ³ï¼Œè¿™ç©æ„æ—¢ç„¶èƒ½å†™ï¼Œé‚£åˆ«äººè‚¯å®šæœ‰å†™å¥½çš„å•Šï¼Œä½•å¿…æµªè´¹æˆ‘æ‘¸é±¼çš„æ—¶é—´ã€‚äºæ˜¯å“¥ä»¬ä¸€ç•ªæœç´¢æ‰¾åˆ°äº†ä¸€ä¸ªçœ‹ä¼¼ç‰¹åˆ«ä¸é”™("),n("strong",null,"ä½¿ç”¨äº†ï¼Œå˜å˜å¥½ä½¿ï¼Œå¼ºçƒˆæ¨è"),s(")çš„åœ°å›¾ç“¦ç‰‡ä¸‹è½½å™¨ğŸ‘‡ğŸ‘‡ğŸ‘‡")],-1),m={href:"https://pan.baidu.com/s/1CA7sdH6zL4OjJxVydKwrWQ?pwd=mdve",target:"_blank",rel:"noopener noreferrer"},b=k(`<p>ä¸‹è½½å®‰è£…åŒ…åè§£å‹æ–‡ä»¶å¤¹ä¼šå¾—åˆ°ä¸€ä¸ª<strong>åœ°å›¾ä¸‹è½½å™¨</strong>ç›®å½•ï¼Œé‡Œé¢æ–‡ä»¶å¦‚ä¸‹ï¼š<br><img src="https://raw.githubusercontent.com/202210230530/blog-images/master/blog-images/20230509162004.png" alt="" loading="lazy"></p><p>åŒå‡»<code>run.bat</code>å³å¯å¯åŠ¨ç¨‹åºï¼</p><div class="hint-container warning"><p class="hint-container-title">æç¤º</p><p>è‹¥æ— æ³•æ‰“å¼€ï¼Œè¯·å°†æ–‡ä»¶å¤¹æ”¹ä¸ºè‹±æ–‡ï¼Œå¹¶æ³¨æ„æ–‡ä»¶å¤¹æ‰€åœ¨è¯¦ç»†è·¯å¾„æ˜¯å¦ä¸º<strong>å…¨è‹±æ–‡</strong></p></div><figure><img src="https://raw.githubusercontent.com/202210230530/blog-images/master/blog-images/20230509162314.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å¯ä»¥çœ‹åˆ°åœ°å›¾ä¸‹è½½å™¨æä¾›äº†å‹å¥½çš„äº¤äº’é¡µé¢ï¼ŒåŠŸèƒ½ä¹ŸæŒºå…¨ã€‚ æˆ‘ä»¬è¦ä¸‹è½½ Google ä¸–ç•Œåœ°å›¾ç“¦ç‰‡,é‚£ä¹ˆéœ€è¦å†é€‰ä¸­äº† Google åœ°å›¾ç“¦ç‰‡åç‚¹å‡»ä¸Šæ–¹çš„<code>ä»»åŠ¡-&gt;ç›´æ¥ä¸‹è½½ä¸–ç•Œåœ°å›¾</code></p><p>åœ¨ä¸‹è½½è®¾ç½®ä¸­é€‰æ‹©è¦ä¸‹è½½ç“¦ç‰‡çš„å±‚çº§å’Œä¸‹è½½åˆ°çš„è·¯å¾„<br><img src="https://raw.githubusercontent.com/202210230530/blog-images/master/blog-images/20230509162743.png" alt="" loading="lazy"></p><p>ç‚¹å‡»é¢„ä¼°ä¸‹è½½é‡å¯ä»¥æŸ¥çœ‹ç“¦ç‰‡å¤§æ¦‚å ç”¨å¤šå°‘å­˜å‚¨ï¼Œç¡®è®¤è‡ªå·±çš„å­˜å‚¨ç©ºé—´å¤Ÿç”¨<br><img src="https://raw.githubusercontent.com/202210230530/blog-images/master/blog-images/20230509163022.png" alt="" loading="lazy"></p><div class="hint-container warning"><p class="hint-container-title">ç‰¹åˆ«æé†’</p><p><strong>ç‰¹åˆ«è¯´æ˜ Google åœ°å›¾ä¸‹è½½éœ€è¦ç§‘å­¦ä¸Šç½‘</strong><br> å¦‚æœä½ éœ€è¦ä¸€ä¸ªç¨³å®šçš„ VPN çš„è¯ï¼Œå¯ä»¥çœ‹å“¥ä»¬è¿™ç¯‡æ–‡ç« ğŸ‘‰<a href="">ä¸ä¼šç§‘å­¦ä¸Šç½‘çš„ç¨‹åºå‘˜ä¸æ˜¯å¥½ç¨‹åºå‘˜</a></p></div><p>å¦‚æœå¯ä»¥ç§‘å­¦ä¸Šç½‘çš„è¯ï¼Œåœ¨åœ°å›¾ä¸‹è½½ä¸Šæ–¹æ‰“å¼€<code>ç½‘ç»œ-&gt;ä»£ç†è®¾ç½®</code></p><figure><img src="https://raw.githubusercontent.com/202210230530/blog-images/master/blog-images/20230509164139.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å¼€å§‹ä¸‹è½½ä»»åŠ¡</p><figure><img src="https://raw.githubusercontent.com/202210230530/blog-images/master/blog-images/20230509164327.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>è¿™æ ·åœ¨ä½ çš„ä¸‹è½½ç›®å½•é‡Œå°±å¯ä»¥çœ‹åˆ°ä¸‹è½½å¥½çš„ç“¦ç‰‡äº†</p><h3 id="_2-ç¦»çº¿ç“¦ç‰‡æœåŠ¡æ­å»º" tabindex="-1"><a class="header-anchor" href="#_2-ç¦»çº¿ç“¦ç‰‡æœåŠ¡æ­å»º" aria-hidden="true">#</a> <strong>2.ç¦»çº¿ç“¦ç‰‡æœåŠ¡æ­å»º</strong></h3><p><strong>1. é¦–å…ˆè¦æŠŠä¸‹è½½å¥½çš„ç“¦ç‰‡æåˆ°å†…ç½‘æœåŠ¡å™¨ä¸Šé¢ã€‚</strong> æˆ‘éœ€è¦å¹²å•¥å‘¢ï¼Ÿ</p><ul class="task-list-container"><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-0" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-0"><strong>æŠŠå·²ç»ä¸‹è½½çš„æ–‡ä»¶åŒæ­¥åˆ°å†…ç½‘æœåŠ¡å™¨</strong></label></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-1" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-1"><strong>æœ‰æ–°æ–‡ä»¶æ¥å…¥åè‡ªåŠ¨åŒæ­¥åˆ°æœåŠ¡å™¨</strong></label></li></ul><p>å’‹æ•´å‘¢ï¼Ÿå†™ä¸ªè„šæœ¬æå®šå°±æˆï¼ğŸ‘<br> ä½œä¸ºæ‘¸ğŸŸè€æ‰‹ï¼Œè‡ªå·±å†™è„šæœ¬å²‚ä¸æ˜¯å¤ª <code>low </code>äº†ï¼Œè¿™æ¬¡æˆ‘ä»¬<strong>è®©<code>ChatGPT</code>ä¸ºæˆ‘ä»¬æ‰“å·¥</strong>å†™ä¸ªè„šæœ¬</p><details class="hint-container details"><summary>GPT ç”Ÿæˆè„šæœ¬</summary><p>Q: è¯·ç”¨ java å®ç°ä¸€ä¸ªè„šæœ¬ï¼Œ1.è¦æ±‚è‡ªåŠ¨å°† window æŒ‡å®šç›®å½•ä¸‹çš„æ–‡ä»¶åŒæ­¥åˆ° linux æœåŠ¡å™¨ä¸Šã€‚2.è¦æ±‚ç›‘å¬å½“å‰ç›®å½•ï¼Œæœ‰æ–°æ–‡ä»¶æ—¶è‡ªåŠ¨åŒæ­¥æ–‡ä»¶ 3.è„šæœ¬å‚æ•°è¦æ±‚ window ç›®å½•å¯é…ç½®ã€linux ç›®å½•å¯é…ç½®</p><p>A: æ­£åœ¨ä¸ºæ‚¨æœç´¢ï¼šjava å®ç°è„šæœ¬ã€window ç›®å½•ã€linux æœåŠ¡å™¨ã€æ–‡ä»¶åŒæ­¥</p><p>å¾ˆé«˜å…´å›ç­”æ‚¨çš„é—®é¢˜ã€‚æ ¹æ®æ‚¨æä¾›çš„è¦æ±‚ï¼Œå¯ä»¥ä½¿ç”¨ Java ç¼–å†™ä¸€ä¸ªè„šæœ¬æ¥åŒæ­¥æ–‡ä»¶ã€‚</p><p>é¦–å…ˆï¼Œä½¿ç”¨ Java ä¸­çš„ SFTP åº“å®ç°å°†æ–‡ä»¶ä» Windows åŒæ­¥åˆ° Linux æœåŠ¡å™¨ä¸Šã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ JSch åº“ï¼ˆ[1]ï¼‰æ¥è¿æ¥ Linux æœåŠ¡å™¨å¹¶ä¸Šä¼ æ–‡ä»¶ã€‚</p><p>æ¥ç€ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Windows ä¸Šç›‘å¬ç›®å½•çš„å˜åŒ–ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Java æ ‡å‡†åº“ä¸­çš„ WatchService ç±»å®ç°ï¼ˆ[2]ï¼‰ã€‚</p><p>æœ€åï¼Œåœ¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è¯»å–å‘½ä»¤è¡Œå‚æ•°ä»¥è·å– Windows å’Œ Linux ç›®å½•çš„è·¯å¾„ã€‚è¿™å¯ä»¥ä½¿ç”¨ Java ä¸­çš„ Args4j åº“ï¼ˆ[3]ï¼‰æ¥å®ç°ã€‚</p><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>jcraft<span class="token punctuation">.</span>jsch<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>kohsuke<span class="token punctuation">.</span>args4j<span class="token punctuation">.</span></span><span class="token class-name">CmdLineException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>kohsuke<span class="token punctuation">.</span>args4j<span class="token punctuation">.</span></span><span class="token class-name">CmdLineParser</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>file<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileSync</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">PORT</span> <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">enum</span> <span class="token class-name">OS</span> <span class="token punctuation">{</span>
        <span class="token constant">WINDOWS</span><span class="token punctuation">,</span>
        <span class="token constant">LINUX</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">OS</span> os<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Path</span> windowsPath<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> linuxUser<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> linuxHost<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Path</span> linuxPath<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">FileSync</span> fileSync <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fileSync<span class="token punctuation">.</span><span class="token function">parseArgs</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        fileSync<span class="token punctuation">.</span><span class="token function">watchDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">parseArgs</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">FileSyncOptions</span> options <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileSyncOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">CmdLineParser</span> parser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CmdLineParser</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            parser<span class="token punctuation">.</span><span class="token function">parseArgument</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">CmdLineException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            parser<span class="token punctuation">.</span><span class="token function">printUsage</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        windowsPath <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span><span class="token function">getWindowsPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        linuxUser <span class="token operator">=</span> options<span class="token punctuation">.</span><span class="token function">getLinuxUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        linuxHost <span class="token operator">=</span> options<span class="token punctuation">.</span><span class="token function">getLinuxHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        linuxPath <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span><span class="token function">getLinuxPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;os.name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;Windows&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            os <span class="token operator">=</span> <span class="token constant">OS</span><span class="token punctuation">.</span><span class="token constant">WINDOWS</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            os <span class="token operator">=</span> <span class="token constant">OS</span><span class="token punctuation">.</span><span class="token constant">LINUX</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">watchDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">WatchService</span> watchService <span class="token operator">=</span> <span class="token class-name">FileSystems</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newWatchService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        windowsPath<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>watchService<span class="token punctuation">,</span> <span class="token class-name">StandardWatchEventKinds</span><span class="token punctuation">.</span><span class="token constant">ENTRY_CREATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">WatchKey</span> key<span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                key <span class="token operator">=</span> watchService<span class="token punctuation">.</span><span class="token function">take</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">WatchEvent</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> event <span class="token operator">:</span> key<span class="token punctuation">.</span><span class="token function">pollEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Path</span> filePath <span class="token operator">=</span> windowsPath<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Path</span><span class="token punctuation">)</span> event<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">syncFile</span><span class="token punctuation">(</span>filePath<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            key<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">syncFile</span><span class="token punctuation">(</span><span class="token class-name">String</span> filePath<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> destinationFilePath<span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>os <span class="token operator">==</span> <span class="token constant">OS</span><span class="token punctuation">.</span><span class="token constant">WINDOWS</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            destinationFilePath <span class="token operator">=</span> <span class="token function">constructRemotePath</span><span class="token punctuation">(</span>linuxPath<span class="token punctuation">,</span> filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            destinationFilePath <span class="token operator">=</span> linuxPath<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">JSch</span> jsch <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Session</span> session <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">ChannelSftp</span> channel <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            session <span class="token operator">=</span> jsch<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span>linuxUser<span class="token punctuation">,</span> linuxHost<span class="token punctuation">,</span> <span class="token constant">PORT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            session<span class="token punctuation">.</span><span class="token function">setConfig</span><span class="token punctuation">(</span><span class="token string">&quot;StrictHostKeyChecking&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;no&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            session<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            channel <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ChannelSftp</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">openChannel</span><span class="token punctuation">(</span><span class="token string">&quot;sftp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            channel<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            channel<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> destinationFilePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">JSchException</span> <span class="token operator">|</span> <span class="token class-name">SftpException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Failed to sync file: &quot;</span> <span class="token operator">+</span> filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>channel <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                channel<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>session <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                session<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">constructRemotePath</span><span class="token punctuation">(</span><span class="token class-name">Path</span> remoteDir<span class="token punctuation">,</span> <span class="token class-name">String</span> filePath<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Path</span> fileName <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFileName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> remoteDir<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¡Œå‚æ•°æ¥è¿è¡Œï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">java</span> FileSync --windows-path <span class="token string">&quot;C:\\path<span class="token entity" title="\\t">\\t</span>o\\directory&quot;</span> --linux-user user --linux-host <span class="token function">host</span> --linux-path <span class="token string">&quot;/path/to/directory&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å…¶ä¸­ï¼Œ<code>--windows-path</code>æŒ‡å®š Windows ç›®å½•çš„è·¯å¾„ï¼Œ<code>--linux-user</code>å’Œ<code>--linux-host</code>æŒ‡å®š Linux æœåŠ¡å™¨çš„ç™»å½•ç”¨æˆ·åå’Œä¸»æœºåï¼Œ<code>--linux-path</code>æŒ‡å®š Linux ç›®å½•çš„è·¯å¾„ã€‚</p><p>å¸Œæœ›è¿™èƒ½å¸®åˆ°æ‚¨ï¼</p></details><p>OK! é‚£æˆ‘ä»¬è¯•ä¸€ä¸‹å¥½ä¸å¥½ç”¨ï¼ ä¸å¥½ç”¨ï¼Œä¸‹æ¬¡å†è°ƒè¯•ï¼</p><p><strong>2.ä½¿ç”¨ nginx ä»£ç†çš„æ–¹å¼å°†è¿™äº›ç“¦ç‰‡åšæˆå¯ä»¥é€šè¿‡ http é“¾æ¥<code>/offlineMapTiles/{z}/{x}/{y}.png</code>è®¿é—®çš„æœåŠ¡</strong></p><p>æˆ‘çš„ nginx é…ç½®æ–‡ä»¶è¯´æ˜</p><h3 id="_3-openlayers3-åŠ è½½ç¦»çº¿-google-åœ°å›¾" tabindex="-1"><a class="header-anchor" href="#_3-openlayers3-åŠ è½½ç¦»çº¿-google-åœ°å›¾" aria-hidden="true">#</a> <strong>3.OpenLayers3 åŠ è½½ç¦»çº¿ Google åœ°å›¾</strong></h3><h3 id="_4-ç»˜åˆ¶åŒºåŸŸ" tabindex="-1"><a class="header-anchor" href="#_4-ç»˜åˆ¶åŒºåŸŸ" aria-hidden="true">#</a> <strong>4.ç»˜åˆ¶åŒºåŸŸ</strong></h3><h3 id="_5-åŒºåŸŸç›‘æ§" tabindex="-1"><a class="header-anchor" href="#_5-åŒºåŸŸç›‘æ§" aria-hidden="true">#</a> <strong>5.åŒºåŸŸç›‘æ§</strong></h3>`,24);function g(h,f){const p=t("VPCard"),e=t("ExternalLinkIcon");return c(),i("div",null,[d,v,a(p,l(u({title:"åœ°å›¾ä¸‹è½½å™¨",desc:"ä½¿ç”¨Javaå¼€å‘çš„åœ°å›¾ç“¦ç‰‡å›¾ä¸‹è½½å·¥å…·ï¼Œæ”¯æŒOpenStreetMapã€å¤©åœ°å›¾ã€è°·æ­Œåœ°å›¾ã€é«˜å¾·åœ°å›¾ã€è…¾è®¯åœ°å›¾ã€å¿…åº”åœ°å›¾çš„XYZç“¦ç‰‡å›¾ä¸‹è½½ä¸åˆå¹¶ã€‚",logo:"/moyu.png",link:"https://gitee.com/CrimsonHu/java_map_download"})),null,16),n("p",null,[s("ä¸ºäº†èŠ‚çº¦æ—¶é—´ï¼Œå“¥ä»¬ç›´æ¥ä¸‹è½½äº†æ‰“åŒ…å¥½çš„ç¨‹åºåŒ… ğŸ‘‰ "),n("a",m,[s("åœ°å›¾ä¸‹è½½å™¨ç¨‹åºåŒ… Windows"),a(e)])]),b])}const w=o(r,[["render",g],["__file","GISåœ°å›¾.html.vue"]]);export{w as default};
